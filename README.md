# 股票历史涨跌幅分析工具

这是一个用于分析股票在出现特定涨跌幅后的历史表现的工具。通过该工具，您可以查看股票在单日涨跌幅达到指定阈值后，未来不同周期内的收益率分布情况，帮助您更好地理解股票的波动特性。

## 功能特点

- 获取股票历史数据并支持本地缓存，提高重复分析效率
- 识别符合特定涨跌幅条件的交易日
- 计算这些交易日之后不同周期（1日、7日、15日、30日、60日、180日、360日）的收益率
- 生成多种可视化图表：
  - 价格走势与信号点图
  - 不同周期收益率分布箱线图（支持交互式操作）
  - 平均累计收益率折线图
- 提供详细的统计分析结果，包括均值、中位数、标准差等
- 生成完整的HTML报告，便于查看和分享

## 安装依赖

使用前请确保安装了以下Python库：

```bash
pip install yfinance pandas numpy matplotlib scipy requests
```

## 使用方法

### 基本用法

```bash
python main.py [股票代码] [目标涨跌幅]
```

例如，分析苹果公司(AAPL)在单日涨幅达到5%后的表现：

```bash
python main.py AAPL 5
```

分析特斯拉(TSLA)在单日跌幅达到3%后的表现：

```bash
python main.py TSLA -3
```

### 高级参数

- `--period`：指定数据周期，可选值包括：1d, 5d, 1mo, 3mo, 6mo, 1y, 2y, 5y, 10y, ytd, max（默认：max）
- `--no-cache`：不使用缓存，强制从API获取最新数据
- `--output`：指定HTML报告输出路径（默认：stock_analysis_results.html）

示例：
```bash
python main.py MSFT 3 --period 5y --output msft_analysis.html
```

## 输出说明

工具会生成一个HTML报告，包含以下内容：

1. **分析概要**：包括目标涨跌幅、符合条件的交易日数量和分析时间范围
2. **价格走势与信号点**：显示股票价格走势及所有符合涨跌幅条件的信号点
3. **不同周期收益率分布**：交互式箱线图，展示各周期收益率的分布情况
4. **平均累计收益率**：展示不同周期的平均累计收益率变化
5. **统计分析结果**：详细的统计数据表，包括样本数、均值、中位数、标准差等

## 注意事项

- 数据来源于Yahoo Finance，可能存在一定延迟
- 首次运行时会下载数据，耗时较长，后续运行会使用缓存
- 部分股票可能因数据不足导致某些周期的分析结果不可用
- 分析结果仅供参考，不构成任何投资建议

## 许可证

本项目采用MIT许可证，详情请见LICENSE文件。